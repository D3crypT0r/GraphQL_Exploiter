import docker

client = docker.from_env()

def build_docker_image():
    print("Building Docker image...")
    image, build_logs = client.images.build(path="/app", tag="my_app")
    for log in build_logs:
        print(log)

def install_python_dependencies():
    print("Installing Python dependencies...")
    requirements = ["tqdm", "argparse", "termcolor", "urllib3", "requests"]
    for req in requirements:
        client.containers.run("my_app", f"pip install {req}")

def install_zip():
    print("Installing zip...")
    client.containers.run("my_app", "apt update && apt install -y zip")

def set_permissions():
    print("Setting permissions...")
    client.containers.run("my_app", "chmod +x /app/server.py")

def set_entrypoint():
    print("Setting entrypoint...")
    client.containers.run("my_app", entrypoint="/app/server.py")

if __name__ == "__main__":
    build_docker_image()
    install_python_dependencies()
    install_zip()
    set_permissions()
    set_entrypoint()
